{% extends 'base/base.html' %}
{% load embed_video_tags %}
{% load tags %}
{% load static %}
{% block page_content %}

    {#    <main class="main">#}

    <div class="recipe-container">
        <h1>{{ recipe.title }}</h1>
        <a href="{% url 'category detail' pk=recipe.category.pk %}">
            <h2>{{ recipe.category.name|upper }}</h2>
        </a>

        <div class="image-container">
            <img src="{{ recipe.image_recipe.image.url }}" alt="{{ recipe.title }}">
        </div>

        <div class="time-container">
            <p>Време за реализация:</p>
            <img src="{% static 'images/clock.svg' %}" alt="clock.png">
            <b>{{ recipe.release_time }}</b> Мин.
        </div>

        <div class="ingredients-container">
            <h4>Съставки:</h4>
            {% for ingredient in recipe.ingredient_set.all %}
                <p>{{ ingredient.food }}</p>
            {% endfor %}

            {% if recipe.allergen.all %}
                <h4>Алергени:</h4>
                {% for name in recipe.allergen.all %}
                    <p>{{ name }}</p>
                {% endfor %}
            {% endif %}
        </div>

        <div class="recipe-details">
            {% if recipe.finish %}
                <p>Завършваме: {{ recipe.finish }}</p>
            {% endif %}
            <p>Kоличество: {{ recipe.serving_value }} гр.</p>
            <p>Издаваме в: {{ recipe.food_plate }}</p>
        </div>

        {% if recipe.summary %}
            <div class="info-container">
                <h2>Информация</h2>
                <p>{{ recipe.summary }}</p>
            </div>
        {% endif %}

        <div class="category-container">
            <a href="{% url 'category detail' pk=recipe.category.pk %}" class="text-black">
                <h6><i class="fas fa-caret-left"></i> {{ recipe.category.name|upper }}</h6>
            </a>
        </div>

        <!-- comments -->
        <div class="comment-section">
            <form action="{% url 'comment recipe' recipe_id=recipe.pk %}" method="post"
                  class="comment-form">
                {% csrf_token %}
                {{ form }}
                <button class="btn comment-button btn-light">Коментирай</button>
            </form>

            {% for comment in  recipe.recipecomment_set.all %}
                <div class="card mb-4">
                    <p>{{ comment }}</p>
                    <p>{{ comment.user.profile.full_name }}</p>
                    <p>{{ comment.publication_date_and_time }}</p>
                    {% if request.user == comment.user %}
                        <div class="comment-actions">
                            <a href="{% url 'comment delete' pk=comment.pk recipe_id=recipe.pk %}"
                               role="button"><i class="fas fa-trash"></i></a>
                            <a href="{% url 'comment edit' pk=comment.pk recipe_id=recipe.pk %}"
                               role="button"><i class="fas fa-edit"></i></a>
                        </div>
                    {% endif %}
                </div>
            {% endfor %}
        </div>
        <!-- end comments -->
    </div>


    {#    </main>#}

{% endblock %}


{#<h1>{{ recipe.title }}</h1>#}
{##}
{##}
{#<a href="{% url 'category detail' pk=recipe.category.pk %}">#}
{#    {{ recipe.category.name.upper }}#}
{#    <!-- image -->#}
{#    <img src="{{ recipe.image_recipe.image.url }}" alt="{{ recipe.title }}">#}
{##}
{##}
{#    <!-- release time -->#}
{#    <p>Време за реализация: <br>#}
{#        <img src="{% static 'images/clock.svg' %}" alt="clock.png">#}
{#        <b>{{ recipe.release_time }}</b> Мин.</p>#}
{##}
{##}
{#    <!-- ingredients -->#}
{##}
{#    <h4>Съставки:</h4>#}
{#    {% for ingredient in recipe.ingredient_set.all %}#}
{##}
{#        {{ ingredient.food }}#}
{##}
{#    {% endfor %}#}
{##}
{#    {% if recipe.allergen.all %}#}
{##}
{##}
{#        <h4>Алергени:</h4>#}
{#        {% for name in recipe.allergen.all %}#}
{##}
{#            {{ name }}#}
{##}
{#        {% endfor %}#}
{##}
{#    {% endif %}#}
{##}
{##}
{#    {% if recipe.finish %}#}
{#        Завършваме :#}
{#        {{ recipe.finish }}#}
{#    {% endif %}#}
{#    Kоличество :#}
{#    {{ recipe.serving_value }} гр.#}
{#    Издаваме в :#}
{#    {{ recipe.food_plate }}#}
{##}
{#    <!-- description -->#}
{##}
{#    {% if recipe.summary %}#}
{#        <h2>Информация</h2>#}
{#        <p>{{ recipe.summary }}</p>#}
{#    {% endif %}#}
{##}
{#    <div>#}
{#        <a href="{% url 'category detail' pk=recipe.category.pk %}" class="text-black">#}
{#            <h6><i class="fas fa-caret-left"></i> {{ recipe.category.name.upper }}</h6></a>#}
{##}
{##}
{#        <!-- comments -->#}
{##}
{##}
{#        <form action="{% url 'comment recipe' recipe_id=recipe.pk %}" method="post"#}
{#              class="comment-form">#}
{#            {{ form }}#}
{#            {% csrf_token %}#}
{##}
{#            <button class="btn comment-button btn-light ">Коментирай</button>#}
{##}
{#        </form>#}
{#        {% for comment in  recipe.recipecomment_set.all %}#}
{#            <div class="card mb-4">#}
{##}
{#                <p>{{ comment }}</p>#}
{##}
{#                <p>{{ comment.user.profile.full_name }}</p>#}
{#                <p>{{ comment.publication_date_and_time }}</p>#}
{##}
{#                <div class="text-center">#}
{#                    {% if request.user == comment.user %}#}
{#                        <a class="btn btn-primary text-danger  btn-floating m-0"#}
{#                           style="background-color: #ffffff"#}
{#                           href="{% url 'comment delete' pk=comment.pk recipe_id=recipe.pk %}"#}
{#                           role="button"><i class="fas fa-trash"></i></a>#}
{#                        <a class="btn btn-primary text-danger btn-floating m-0"#}
{#                           style="background-color: #ffffff"#}
{#                           href="{% url 'comment edit' pk=comment.pk recipe_id=recipe.pk %}"#}
{#                           role="button"><i class="fas fa-edit"></i></a>#}
{#                    {% endif %}#}
{#                </div>#}
{#            </div>#}
{##}
{#        {% endfor %}#}
{##}
{#        <!-- end comments -->#}